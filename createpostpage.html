<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@48,400,0,0" />
    <title>admin</title>
</head>
<body>
    <div class="dashboard">
    <div class="content-dash" >
        <div class="logo">
            <a href="#">R</a>
        </div><br>
        <div class="home">
        <span class="material-symbols-sharp">
            house
            </span>
        <h3><a style="color:rgb(180, 180, 180)" href="dashboard.html">Home</a></h3>
    </div>
        <div class="maincontant">
            <div class="post1">
            <span class="material-symbols-sharp">
                post_add
                </span>
           <h5><a style="color:rgb(180, 180, 180)" href="createpostpage.html">Add Post</a></h5> 
        </div>
        <div class="post2">
            <span class="material-symbols-sharp">
                sms
                </span>
                <h5><a style="color:rgb(180, 180, 180)" href="messagepage.html">Message</a></h5> 
            </div>
        </div>
    </div>
    <div class="content-body">
        <div class="header-dash">
            <div class="menu">
                <span></span>
                <span></span>
                <span></span>
            </div>
          <div class="user">
            <span class="material-icons-sharp user-user">account_circle</span> 
                
          <div class="dropdown">
         <span class="user-user">User</span>
        <div class="dropdown-content" style="background-color: rgb(9, 57, 9);">
        <span class="material-icons-sharp">logout</span><button onclick="logout();">Log Out</button>
       </div>
       </div>
          </div>
       </div>
   <div class="body2-dash">
   <div id="form1">

   </div>
   
      <div id="table1">

      </div>
</div>
    </div>
 
</div>
<script>
    var form1 = `<div>
        <h3 style="background-color: rgb(12, 73, 12); color: #fff">Create Post</h3>
        <input type="file" class="file" id="photo">
    <label></label>
    <input type="title" id="title" placeholder="Enter Your Title">

    <label>  </label>
     <textarea id="text" placeholder="Talking on Blogs" required></textarea>
    
  <button type="submit" class="btn" onclick="save()">Save</button>
</div>`;

function table1() {
    let table1 = `<table class="table1">
  <thead>
    <tr>
      <th>NO</th>
      <th>Photos</th>
      <th>Title</th>
      <th>Text</th>
      <th>Edit</th>
      <th>Delete</th>
    </tr>
  </thead>
  <tbody>`;
    for (let i = 0; i < needs.length; i++){
        table1 = table1 + `<tr>
      <td>${i + 1}</td>
      <td>${needs[i].photo}</td>
      <td>${needs[i].title}</td>
      <td>${needs[i].text}</td>
      <td><button type="button" class="btn" style="background-color: #ffc720;" onclick="edit(${i})">Edit</button></td>
      <td><button type="button" class="btn" style="background-color: #dc3545; color: #fff;" onclick="deleteData(${i})">Delete</button></td>
    </tr> `;
    };
    table1 = table1+`</tbody>
    </table>`;
    document.getElementById("table1").innerHTML = table1;
};
document.getElementById("form1").innerHTML = form1;
needs = [];
getData();
table1();
function getData(){
    let Data = localStorage.getItem("needs");
    if (Data) {
        needs = JSON.parse(Data);
    } else {
        setData();
    };
};
function setData() {
    localStorage.setItem("needs", JSON.stringify(needs));
};
function save() {
    let photo= document.getElementById("photo");
    let title= document.getElementById("title");
    let text = document.getElementById("text");

    if (title.value == 0) {
        alert("title is Empty");
        return
    }
    let data = {
        photo: photo.value,
        title: title.value,
        text: text.value
    };
    needs.push(data);
    setData();

    table1();
    photo.value = "";
    title.value = "";
    text.value = "";
};
function deleteData(event) {
    needs.splice(event, 1);
    setData();
    table1();

};

function edit(event) {
    let editForm1= 
    `<div>
        <h3 style="background-color: rgb(12, 73, 12); color: #fff">Update Post</h3>
        <input type="file" value="${needs[event].photo}" id="newPhoto">
    <label></label>
    <input type="title" value="${needs[event].title}" id="newTitle"placeholder="Enter Your Title">
 <label></label>
    <textarea type="text" id="newText" value="${needs[event].text}" placeholder="Talking on Blogs" required></textarea>
  <button type="submit" class="btn" onclick="update(${event})">Update</button>
</div>`;
    document.getElementById("form1").innerHTML = editForm1;
};
function update(event) {
    let newPhoto = document.getElementById('newPhoto');
    let newTitle = document.getElementById('newTitle'); 
    let newText = document.getElementById('newText');

    needs[event] = {
        photo: newPhoto.value,
        title: newTitle.value,
        text: newText.value
    };
    setData();
    table1();
    document.getElementById("form1").innerHTML = form1;
}
</script>
</body>
<script src="logout.js"></script>
</html>